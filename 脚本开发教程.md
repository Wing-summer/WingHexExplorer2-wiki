该页面 Wiki 仍处于构建状态

**内容贡献者：** 寂静的羽夏

## 简介

&emsp;&emsp;该软件使用的脚本引擎是 **AngelScript** 。AngelScript 是一种高性能的脚本语言，主要用于游戏开发和嵌入式应用程序。它的设计目标是易于集成、轻量级，并且具有类似于 C/C++ 的语法。AngelScript 允许开发者在应用程序中嵌入脚本，从而使得游戏逻辑、行为和其他动态元素可以在不重新编译整个程序的情况下进行修改。

&emsp;&emsp;AngelScript 是一种专为嵌入式应用程序设计的脚本语言，具有以下特点：

1. **易于集成**：AngelScript 允许开发者将其嵌入到 C++ 应用程序中，提供灵活的脚本执行环境，支持对 C++ 类型的直接操作。
2. **语法简洁**：它的语法类似于 C/C++，对于熟悉这些语言的开发者来说，学习成本低，易于上手。
3. **类型系统**：AngelScript 是强类型语言，支持静态类型检查，减少了运行时错误，同时也支持类型推断。
4. **面向对象编程**：支持类、继承和多态，可以创建复杂的数据结构和功能。
5. **模块化**：支持模块化设计，开发者可以将代码组织成不同的模块，提高代码的可重用性和维护性。
6. **内存管理**：提供自动内存管理机制，减少内存泄漏的风险。
7. **性能优化**：AngelScript 经过优化，能够在大多数情况下提供接近 C++ 的执行性能，适合需要实时反馈的应用场景。
8. **丰富的扩展性**：可以通过 C++ 代码扩展其功能，开发者可以自定义数据类型和操作符，甚至可以创建新的脚本库。

&emsp;&emsp;AngelScript 通常用于游戏引擎中，帮助开发者实现动态内容和扩展功能。

## 入门

&emsp;&emsp;该软件内置了一个简易但五脏俱全的小`IDE`，支持脚本的编写和调试功能。

## 在羽云十六进制编辑器中编写并运行脚本

点击上方的脚本工具栏-脚本编辑器

![image-20241009160831085](markdown-pic/%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/image-20241009160831085.png)

点击脚本编辑器中的**新建**，并选择保存位置。

![image-20241009160908102](markdown-pic/%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/image-20241009160908102.png)

然后就可以写AngelScript代码了。

我们输入如下代码

```AngelScript
void main()
{
	print("Hello World");
}
```

点击**调试器**选项卡中的**运行**

![image-20241009161059743](markdown-pic/%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/image-20241009161059743.png)

我们可以看到下方输出框输出了

​	**Hello World**

## 数据类型

### 基础数据类型

AngelScript中的基本数据类型：

- void空类型：它只能用来告诉编译器函数不返回任何数据。

- bool布尔类型：一种布尔类型，只有两个可能的值：`true`或`false`。

- Integer numbers整型

  | 类型   | 最小值                     | 最大值                     |
  | ------ | -------------------------- | -------------------------- |
  | int8   | -128                       | 127                        |
  | int16  | -32,768                    | 32,767                     |
  | int    | -2,147,483,648             | 2,147,483,647              |
  | int64  | -9,223,372,036,854,775,808 | 9,223,372,036,854,775,807  |
  | uint8  | 0                          | 255                        |
  | uint16 | 0                          | 65,535                     |
  | uint   | 0                          | 4,294,967,295              |
  | uint64 | 0                          | 18,446,744,073,709,551,615 |

- Real numbers实数型

  | 类型   | 值范围                    | 最小正数              | 最大有效数字 |
  | ------ | ------------------------- | --------------------- | ------------ |
  | float  | +/- 3.402823466e+38       | 1.175494351e-38       | 6            |
  | double | +/- 1.79769313486231e+308 | 2.22507385850720e-308 | 15           |

- array<类型>	数组, 有且只有一维数组
- string字符串
- obj  object，带@指handle
- dictionary	词典
- enum	非变量，枚举
- ref	需手动registe，如同object handle
- weakref	与ref类似，会尽可能保持handle存活

## 扩展类型



## 语法

 这是巴科斯-诺尔范式（BNF）中的语言语法。

使用以下约定：

- ( )  - 用于分组
- { }  - 0次或多次重复
- [ ]  - 可选
- |   - 或
- ’ ’  - 标记

### 声明变量

```
//声明变量
int num;

//可以为变量赋上同类型的初始值
int myvar = 2;

//加上关键词const声明变量为只读，该情况下变量将会被视作静态
const float pi = 3.14159f;

//使用@声明句柄对象，详见句柄一章
object@ handle = null;

//使用了未声明的变量，将会报错
strangObj = 2;//因未声明
```

当程序结束执行声明变量的代码块时，该变量将不再有效。

```
// 定义了一个全局变量`globalVar`，它将在整个程序运行期间持续存在。
int globalVar;

// 定义了一个局部变量`localText`，它将在函数执行结束时失去作用域。
void performAction()
{
    string localText;
}

// 定义了一个类成员`classPos`，它将在类实例被销毁时失效。
class Entity
{
    Vector classPos;
}
```


如果变量在声明时没有被初始化，将会出现以下情况：

```
// 基本数据类型的变量将具有不确定的值，这取决于它们被分配的内存区域。
// 对于新分配的内存区域，这些值通常为0或空字符串。
int uninitializedNumber; // 默认为0
string uninitializedText; // 默认为空字符串""

// 对象将使用其默认构造函数来初始化。
// 如果对象类型没有默认构造函数，则必须显式初始化。
// 有关更多信息，请参考对象相关章节。
Entity entity; // 使用Entity()构造函数初始化

// 引用将默认指向一个空对象。
Entity@ entityRef; // 默认为null
```


赋值语句

```
// 变量赋值
x = y;
// 函数调用
callFunction();
```


任何**赋值**或**函数**调用都可以作为**独立的语句写在一行**。

通常，这些语句不返回任何值（或者返回的值被忽略）。

赋值或函数调用**必须以分号`;`结束**，这是编译器识别语句结束的标志。

更多细节，请参考AngelScript的表达式处理规则。

​              

### 表达式

条件判断结构
条件判断结构通常由`if-else`语句和代码块组成。

根据条件是否成立来决定执行哪个代码块。

可以串联多个`if-else`语句，以实现多条件的顺序选择。

```c
if (checkCondition) {
    // 如果条件成立，则执行此代码块
} else if (anotherCondition) {
    // 否则，如果anotherCondition为真，则执行此代码块
} else {
    // 如果所有条件都不成立，则执行此代码块
}
```


选择结构
当条件由一个整数（无论是有符号还是无符号）控制时，使用选择结构比使用多个条件判断结构更为高效。

选择结构由`switch-case`和代码块组成，通过匹配整数值直接执行相应的代码块，这比顺序判断的`if-else`结构效率更高。

```c
switch (value) {
    case 0:
        // 如果value等于0，则执行此代码块
        break;
    // case 1后面没有break，所以会执行下一个case的代码
    case 1:
    case specificValue:
        // 如果value等于1或specificValue，则执行此代码块
        break;
    default:
        // 如果value不匹配上述任何值，则执行此代码块
        break;
}
```


`case`后的值**必须是常量**，变量不能用作`case`的值。

除非你希望代码继续执行下一个`case`的代码，否则每个`case`代码块都应该以`break`语句结束。



### 循环

AngelScript循环有`while` `do-while` `for`三种不同的类型

#### while循环

`while`循环是在执行循环之前进行条件检查的循环

```csharp
//循环会在执行之前检查是否满足条件
int i = 0;
while(i =< 5)
{
    i++;
}
```

### do-while循环
`do-while`循环是一种先执行循环体，然后检查条件是否满足的循环结构。

```c
int i = 0;
do {
    i++;
} while (i <= 1); // 注意：这里的条件应该是 i <= 1，而不是 i =< 1
```


### for循环
`for`循环本质上是`while`循环的紧凑形式，它在执行循环体之前检查条件。

```c
array<array<int>> list;
// for循环可以在循环结构中声明仅在循环体内有效的变量，并声明每次循环结束后执行的增量表达式
for (int i = 0; i <= 1; i++) {
    list[i] = {};
}
// 循环外变量将失效
int i = 2;

// for循环中可以声明多个变量，以逗号分隔
// 同样地，可以以逗号分隔多个增量表达式
for (int i = 0, j = 0; i < 10; i++, j++) {
    list[i][j] = 0;
}
```
### 循环控制
当循环条件过于复杂，或者需要外部灵活控制循环时，就需要使用循环控制语句。

#### 中断（Break）
使用关键词`break`来中断循环。

```c
// 无限循环
for (;;) {
    if (condition) {
        break; // 中断循环
    }
}
```
#### 继续（Continue）
使用关键词`continue`来跳过当前循环的剩余部分，直接进入下一轮循环。

```c
int i = 0;
while (i < 10) {
    i++;
    if (i == 5) {
        continue; // 跳过当前循环的剩余部分
    }
    print(i); // 打印i的值
}
// 输出结果为：1 2 3 4 6 7 8 9
```
### 函数

### 类

### 句柄

### 注释

注释与其他语言一样，你可以使用//进行单行注释，也可以使用/**进行多行注释

```
void NB()
{
    //这是单行注释
    /***
        这是多行注释
    ***/
}
```



### 共享实例

## 索引

## 脚本调试







---

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="images/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
